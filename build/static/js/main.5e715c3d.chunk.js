(this["webpackJsonpsushi-go"]=this["webpackJsonpsushi-go"]||[]).push([[0],{33:function(e,a,t){e.exports=t(55)},55:function(e,a,t){"use strict";t.r(a);var r=t(0),s=t.n(r),c=t(28),n=t(3),l=t(4),o=t(6),i=t(5),d=t(20),m=t(14),u=t(18),p=t(7),h=t(29),f=t.n(h),y=t(30),g=t.n(y).a.initializeApp({apiKey:"AIzaSyDNF0tW0P_WQmbTug2hN7zG97MDKpKDVvQ",authDomain:"arobillard-games.firebaseapp.com",databaseURL:"https://arobillard-games.firebaseio.com"}),b=f.a.createClass(g.database()),v=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).displayTitle=function(){return void 0===e.props.subtitle?s.a.createElement(d.b,{to:"/"},s.a.createElement("h1",{className:"logo"},"Sushi Go!")):s.a.createElement(d.b,{to:"/"},s.a.createElement("strong",{className:"logo"},"Sushi Go!"))},e.displaySubtitle=function(){if(void 0!==e.props.subtitle)return s.a.createElement("h1",{className:"subtitle gutter-2 push-0 spread-right"},e.props.subtitle)},e.handleSettings=function(){e.props.handleSettingsDisplay()},e.displayGamecode=function(){if(void 0!==e.props.gamecode)return e.props.host&&e.props.gameStart?s.a.createElement("div",{className:"game-info-wrap pad-t-1-2 pad-b-1-2"},s.a.createElement("button",{onClick:e.handleSettings,className:"push-r-2"},"Settings"),s.a.createElement("p",{className:"push-0"},"Gamecode: ",s.a.createElement("span",{className:"gamecode push-l"},e.props.gamecode))):s.a.createElement("div",{className:"game-info-wrap pad-t-1-2 pad-b-1-2"},s.a.createElement("p",{className:"push-0"},"Gamecode: ",s.a.createElement("span",{className:"gamecode push-l"},e.props.gamecode)))},e}return Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("header",{className:"masthead"},s.a.createElement("div",{className:"wrapper gutter"},this.displayTitle(),this.displaySubtitle(),this.displayGamecode()))}}]),t}(s.a.Component),E=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",{className:"footer"},s.a.createElement("div",{className:"wrapper grid-flex-v-bottom pad-t-b-1-1-2 gutter-1-2"},s.a.createElement("div",{className:"xs-1 m-1-2 island-1-2"},s.a.createElement("strong",{className:"logo headline-1 block"},"Sushi Go!"),s.a.createElement("p",{className:"body-2 push-0"},"Based on popular table top game ",s.a.createElement("a",{href:"https://gamewright.com/product/Sushi-Go",target:"_blank",rel:"noopener noreferrer"},"Sushi Go")," by ",s.a.createElement("a",{href:"https://gamewright.com/",target:"_blank",rel:"noopener noreferrer"},"Gamewright"),".")),s.a.createElement("div",{className:"xs-1 m-1-2 island-1-2"},s.a.createElement("p",{className:"body-2 push-0"},"Designed and developed for personal use only by ",s.a.createElement("a",{href:"https://adamrobillard.ca"},"Adam Robillard"),"."),s.a.createElement("p",{className:"body-2 push-0"},"Sushi illustrations by ",s.a.createElement("a",{href:"https://hannahdel.ca"},"Hannah Delaney"),"."))))}}]),t}(s.a.Component),k={egg:{title:"Egg",family:"nigiri",type:"nigiri",value:1,count:4,color:"yellow",scoreDesc:"Nigiri 1",wasabi:!1},salmon:{title:"Salmon",family:"nigiri",type:"nigiri",value:2,count:5,color:"yellow",scoreDesc:"Nigiri 2",wasabi:!1},squid:{title:"Squid",family:"nigiri",type:"nigiri",value:3,count:3,color:"yellow",scoreDesc:"Nigiri 3",wasabi:!0},"maki-1":{title:"Maki",family:"maki",type:"rolls",value:1,count:4,color:"red",scoreDescL:"Most: 6/4/2",scoreDescS:"Most: 6/3"},"maki-2":{title:"Maki",family:"maki",type:"rolls",value:2,count:4,color:"red",scoreDescL:"Most: 6/4/2",scoreDescS:"Most: 6/3"},"maki-3":{title:"Maki",family:"maki",type:"rolls",value:3,count:3,color:"red",scoreDescL:"Most: 6/4/2",scoreDescS:"Most: 6/3"},tempura:{title:"Tempura",family:"tempura",type:"appetizer",count:8,color:"purple",scoreDesc:"x2 = 5"},sashimi:{title:"Sashimi",family:"sashimi",type:"appetizer",count:8,color:"green",scoreDesc:"x3 = 10"},"miso-soup":{title:"Miso Soup",family:"miso-soup",type:"appetizer",count:8,color:"turquoise",scoreDesc:"Discard If another is played this turn",cancelled:!0},wasabi:{title:"Wasabi",family:"wasabi",type:"special",count:3,color:"yellow",scoreDesc:"Next nigiri x3"},tea:{title:"Tea",family:"tea",type:"special",count:3,color:"burgundy",scoreDesc:"x1 per most colour"},"ice-cream":{title:"Ice Cream",family:"ice-cream",type:"dessert",count:15,color:"light-blue",scoreDesc:"x4 = 12"}};function N(){var e=[];return Object.keys(k).map((function(a){for(var t=0;t<k[a].count;)"dessert"!==k[a].type?(e.push(a),t++):t++})),e}var S=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).emptyUsers=function(){for(var a=8-Object.keys(e.props.users).length,t=[],r=0;r<a;)t.push(s.a.createElement("div",{key:"unclaimed-".concat(r),className:"xs-1-2 m-1-3 island-1-2"},s.a.createElement("div",{className:"embed-1by1 player-card no-user"},s.a.createElement("div",{className:"player-card-icon"}),s.a.createElement("h3",{className:"player-card-name"},"---")))),r++;return t},e.handleDeleteUser=function(a){e.props.deleteUser(a.currentTarget.dataset.user)},e}return Object(l.a)(t,[{key:"render",value:function(){var e=this,a=this.props.users;return s.a.createElement("div",{className:"player-card-grid grid-flex"},Object.keys(this.props.users).map((function(t){return s.a.createElement("div",{key:t,className:"xs-1-2 m-1-3 island-1-2"},s.a.createElement("div",{className:"embed-1by1 player-card bg-".concat(a[t].color).concat(a[t].host?" host":"")},s.a.createElement("div",{className:"player-card-icon"}),s.a.createElement("h3",{className:"player-card-name"},a[t].userName),s.a.createElement("button",{className:"player-card-remove","data-user":t,onClick:e.handleDeleteUser,"aria-label":"Delete user"},s.a.createElement("i",{className:"font-alt"},"X"))))})),this.emptyUsers())}}]),t}(s.a.Component),C=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).handleAddUser=function(a){a.preventDefault();var t={userName:a.target.userName.value,color:a.target.color.value,cards:{}},r=Object.keys(e.props.users).length,s=e.props.users,c=Object.keys(e.props.users),n=[];c.forEach((function(e){n.push(s[e].color)})),!0!==n.includes(a.target.color.value)&&r<8&&e.props.addUser(t)},e.colorOptions=function(){var a=["purple","green","turquoise","yellow","cyan","navy","pink","red"],t=e.props.users,r=Object.keys(e.props.users),c=[],n=[],l=0;for(r.forEach((function(e){var r=a.indexOf(t[e].color);c.push(t[e].color),a.splice(r,1)}));l<a.length;)n.push(s.a.createElement("div",{key:a[l],className:"color-swatch"},s.a.createElement("input",{id:"c-".concat(a[l]),type:"radio",name:"color",value:a[l],defaultChecked:0===l,required:!0}),s.a.createElement("label",{className:"bg-".concat(a[l]),htmlFor:"c-".concat(a[l])},s.a.createElement("span",null,"Purple")))),l++;for(l=0;l<c.length;)n.push(s.a.createElement("div",{key:c[l],className:"color-swatch"},s.a.createElement("input",{id:"c-".concat(c[l]),type:"radio",name:"color",value:c[l],disabled:!0}),s.a.createElement("label",{className:"bg-".concat(c[l]),htmlFor:"c-".concat(c[l])},s.a.createElement("span",null,"Purple")))),l++;return n},e}return Object(l.a)(t,[{key:"render",value:function(){return Object.keys(this.props.users).length>=8?s.a.createElement("form",{className:"pop-up-add-user island-2",onSubmit:this.handleAddUser},s.a.createElement("h2",null,"Sorry, this game is full!")):s.a.createElement("form",{className:"pop-up-add-user island-2",onSubmit:this.handleAddUser},s.a.createElement("h2",null,"Enter your name and pick a colour!"),s.a.createElement("div",{className:"grid-colors"},this.colorOptions()),s.a.createElement("div",{className:"grid-flex"},s.a.createElement("input",{name:"userName",type:"text",ref:this.userNameInput,required:!0,placeholder:"User Name",defaultValue:this.props.localUser}),s.a.createElement("button",{className:"btn btn-medium btn-no-shadow",type:"submit"},"Join")))}}]),t}(s.a.Component),O=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).usersDisplay=function(){return Object.keys(e.props.users).includes(e.props.localUser)?s.a.createElement(S,{users:e.props.users,deleteUser:e.props.deleteUser}):s.a.createElement(C,{addUser:e.props.addUser,localUser:e.props.localUser,users:e.props.users})},e.startGame=function(){var a=e.props.localUser,t=e.props.users;if(void 0!==t[a]&&!0===t[a].host)return s.a.createElement("button",{className:"btn btn-medium",onClick:e.props.startGame},"Start Game!")},e}return Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"wrapper grid-flex-v-middle gutter-1-2 pad-t-1-2 pad-b-4"},s.a.createElement("div",{className:"xs-1 m-1-2 island-1-2"},s.a.createElement("h2",{className:"text-purple shadow-t-pink-2"},"Gamecode"),s.a.createElement("strong",{className:"gamecode-large block font-alt text-pink shadow-t-purple-4"},this.props.gamecode),this.startGame()),s.a.createElement("div",{className:"xs-1 m-1-2"},this.usersDisplay()))}}]),t}(s.a.Component),j=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).state={confirm:!1},e.handlePlayCard=function(a){e.state.confirm||e.setState({confirm:!0})},e.askConfirm=function(){if(e.state.confirm)return s.a.createElement("div",{className:"card-confirm"},s.a.createElement("button",{className:"btn push",onClick:e.confirmCard},"Confirm"),s.a.createElement("button",{className:"btn btn-pink",onClick:e.cancelCard},"Cancel"))},e.confirmCard=function(a){var t=a.currentTarget.closest(".card-sushi").dataset.card;e.props.userPlayCard(t),e.setState({confirm:!1})},e.cancelCard=function(a){e.setState({confirm:!1})},e.displayMakiIcons=function(){for(var a=e.props.cardData,t=[],r=0;r<a.value;)t.push(s.a.createElement("li",{key:"maki-".concat(r+1)},s.a.createElement("img",{className:"maki-icon",src:"images/maki.svg",alt:"Maki"}))),r++;return t},e}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.cardData,a=Object.keys(this.props.users).length;return"maki"===e.family?s.a.createElement("div",{onClick:this.props.showConfirm?this.handlePlayCard:null,"data-card":this.props.index,className:"card-sushi maki".concat(this.props.revealed?"":" not-revealed")},s.a.createElement("ul",{className:"card-maki-icons list-group-flex push-0"},this.displayMakiIcons()),s.a.createElement("div",{className:"card-image"},s.a.createElement("img",{src:"images/maki.svg",alt:""})),s.a.createElement("div",{className:"card-info"},s.a.createElement("h3",{className:"card-title"},e.title),s.a.createElement("h4",{className:"card-score-desc"},a<6?e.scoreDescS:e.scoreDescL)),this.askConfirm()):s.a.createElement("div",{onClick:this.props.showConfirm?this.handlePlayCard:null,"data-card":this.props.index,className:"card-sushi".concat(e.family?" ".concat(e.family):"").concat(this.props.wasabiApplied?" wasabi-applied":"").concat(this.props.cancelled?" miso-cancelled":"").concat(this.props.revealed?"":" not-revealed")},s.a.createElement("div",{className:"card-image"},s.a.createElement("img",{src:"images/".concat(this.props.img,".svg"),alt:""})),s.a.createElement("div",{className:"card-info"},s.a.createElement("h3",{className:"card-title"},e.title),s.a.createElement("h4",{className:"card-score-desc"},e.scoreDesc)),this.askConfirm())}}]),t}(s.a.Component),w=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.cardData;return"maki"===e.family||"nigiri"===e.family?s.a.createElement("div",{className:"card-sushi ".concat("Wasabi"===e.title?"wasabi":e.family).concat(this.props.wasabiApplied?" wasabi-applied":"").concat(this.props.revealed?"":" not-revealed")},s.a.createElement("div",{className:"card-img-wrap"},s.a.createElement("span",{className:"card-points"},e.value),s.a.createElement("img",{src:"images/".concat("maki"===e.family?"maki":this.props.img,".svg"),alt:e.title}))):s.a.createElement("div",{className:"card-sushi ".concat(e.family).concat(this.props.cancelled?" miso-cancelled":"").concat(this.props.revealed?"":" not-revealed")},s.a.createElement("div",{className:"card-img-wrap"},s.a.createElement("img",{src:"images/".concat(this.props.img,".svg"),alt:e.title})))}}]),t}(s.a.Component),D=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={score:0},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.state.score,t=setInterval((function(){a+=1,e.setState({score:a})}),50);setTimeout((function(){clearInterval(t)}),50*this.props.score+1)}},{key:"render",value:function(){var e=this.props.userData;return s.a.createElement("div",{className:"xs-1-2 m-1-4 island-1-2"},s.a.createElement("div",{className:"points-grid-item bg-".concat(e.color," embed-1by1")},s.a.createElement("div",null,s.a.createElement("h3",{className:"headline-4"},e.userName),s.a.createElement("strong",null,this.state.score))))}}]),t}(s.a.Component),x=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).handleStartNextRound=function(){e.props.startNewRound()},e.handleExitToLobby=function(){e.props.exitToLobby()},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){Object(p.a)({},this.props.users),this.props.localUser}},{key:"render",value:function(){var e=Object(p.a)({},this.props.users),a=Object.keys(e),t=(a.length,a.length/2);return s.a.createElement("div",{className:"pop-up-round-end island"},s.a.createElement("div",{className:"island"},s.a.createElement("h2",{className:"headline-1"},3===this.props.round?"Game Over!":"End of Round ".concat(this.props.round))),s.a.createElement("div",{className:"points-grid grid-flex island-1-2"},a.map((function(a){var r=e[a];return s.a.createElement(D,{key:"points-".concat(a),userData:r,widthL:t,score:r.score?r.score:"0"})}))),s.a.createElement("div",{className:"island"},3===this.props.round?s.a.createElement("button",{className:"btn",onClick:this.handleExitToLobby},"Return to Lobby"):s.a.createElement("button",{className:"btn",onClick:this.handleStartNextRound},"Start Next Round!")))}}]),t}(s.a.Component),U=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).state={handVisible:!0},e.teaRef=s.a.createRef(),e.userPlayCard=function(a){e.props.playCard(a)},e.showHand=function(){var a=e.props.localUser,t=Object(p.a)({},e.props.users),r=e.props.hands[t[a].handRef],c=[],n=[],l=!!t[a].playedCards&&t[a].playedCards.ready;r&&r.forEach((function(e){c.includes(k[e].family)||c.push(k[e].family)}));var o=1;return c.forEach((function(a){r.forEach((function(r){if(k[r].family===a){var c=k[r];n.push(s.a.createElement(j,{key:"card-".concat(o,"-").concat(r),index:r,img:r,cardData:c,users:t,userPlayCard:e.userPlayCard,showConfirm:!0,revealed:!0})),o++}}))})),s.a.createElement("aside",{className:"hand bg-".concat(e.props.users[e.props.localUser].color,"-faded").concat(e.state.handVisible?" open":"").concat(l?" locked":"")},s.a.createElement("button",{onClick:e.handleHandVisibility,className:"hand-title bg-".concat(e.props.users[e.props.localUser].color),tabIndex:"0"},s.a.createElement("div",{className:"hand-title-rotate"},s.a.createElement("h2",null,"Your Hand")),s.a.createElement("span",{className:"headline-3"},e.state.handVisible?"X":"<")),s.a.createElement("div",{className:"hand-cards island"},n))},e.handleHandVisibility=function(){e.state.handVisible?e.setState({handVisible:!1}):e.setState({handVisible:!0})},e.myPlayedCards=function(){var a=e.props.localUser,t=Object(p.a)({},e.props.users),r=t[a].playedCards?t[a].playedCards.cards:[],c=[],n=[];r&&r.forEach((function(e){c.includes(k[e.card].family)||("wasabi"!==k[e.card].family||c.includes("nigiri")?c.push(k[e.card].family):c.push("nigiri"))}));var l=1,o={family:null,length:0};if(c.forEach((function(a){var c=0;if("ice-cream"!==a&&"wasabi"!==a&&"tea"!==a){var i=[];r.forEach((function(r){var n=k[r.card];"maki"===a&&"maki"===n.family&&(c+=n.value),n.family===a&&(i.push(s.a.createElement(j,{key:"".concat(a,"-").concat(l,"-").concat(r.card),index:r.card,img:r.card,cardData:n,users:t,userPlayCard:e.userPlayCard,showConfirm:!1,cancelled:r.cancelled,wasabiApplied:r.wasabiApplied,revealed:r.revealed})),l++)})),"maki"===a&&i.push(s.a.createElement("div",{key:"my-maki-count",className:"maki-count"},s.a.createElement("span",null,c))),r.forEach((function(r){var c=k[r.card];"wasabi"===c.family&&"nigiri"===a&&(i.push(s.a.createElement(j,{key:"".concat(a,"-").concat(l,"-").concat(r.card),index:r.card,img:r.card,cardData:c,users:t,userPlayCard:e.userPlayCard,showConfirm:!1,cancelled:r.cancelled,revealed:r.revealed})),l++)})),i.length>o.length&&(o.length=i.length,o.family=a),n.push(s.a.createElement("div",{key:a,className:"sushi-family ".concat(a)},i))}})),n.forEach((function(a){a.key===o.family&&"tea"!==a.key&&r.forEach((function(r){var c=k[r.card];"tea"===c.family&&(a.props.children.push(s.a.createElement(j,{ref:e.teaRef,key:"tea-".concat(l,"-").concat(r.card),index:r.card,img:r.card,cardData:c,users:t,userPlayCard:e.userPlayCard,showConfirm:!1,revealed:r.revealed})),l++)}))})),0===o.length){var i=[];r&&r.forEach((function(a){var r=k[a.card];"tea"===r.family&&(i.push(s.a.createElement(j,{key:"tea-".concat(l,"-").concat(a.card),index:a.card,img:a.card,cardData:r,users:t,userPlayCard:e.userPlayCard,showConfirm:!1,revealed:a.revealed})),l++)})),n.push(s.a.createElement("div",{key:"tea",className:"sushi-family tea"},i))}return s.a.createElement("div",{className:"sushi-layout"},n)},e.displayDessert=function(){var a=e.props.localUser,t=Object(p.a)({},e.props.users),r=!!t[a].playedCards&&t[a].playedCards.cards,c=[],n=1;return r&&r.forEach((function(a){var r=k[a.card];"ice-cream"===r.family&&(c.push(s.a.createElement(j,{key:"ice-cream-".concat(n),index:a.card,img:a.card,cardData:r,users:t,userPlayCard:e.userPlayCard,showConfirm:!1,revealed:a.revealed})),n++)})),c},e.displayPlayerPlayedCards=function(){var a=e.props.localUser,t=Object(p.a)({},e.props.users),r=Object.keys(t),c=[];return r.forEach((function(e){if(e!==a){var r=!!t[e].playedCards&&t[e].playedCards.cards,n=[],l=[];r&&r.forEach((function(e){n.includes(k[e.card].family)||("wasabi"!==k[e.card].family||n.includes("nigiri")?n.push(k[e.card].family):n.push("nigiri"))}));var o=1,i={family:null,length:0};if(n.forEach((function(a){var t=0;if("ice-cream"!==a&&"wasabi"!==a&&"tea"!==a){var c=[];r.forEach((function(r){var n=k[r.card];"maki"===a&&"maki"===n.family&&1==r.revealed&&(t+=n.value),n.family===a&&(c.push(s.a.createElement(w,{key:"".concat(e,"-").concat(r.card,"-").concat(o),cardData:k[r.card],img:r.card,cancelled:r.cancelled,wasabiApplied:r.wasabiApplied,revealed:r.revealed})),o++)})),"maki"===a&&0!==t&&c.push(s.a.createElement("div",{key:"".concat(e,"-maki-count"),className:"maki-count"},s.a.createElement("span",null,t))),r.forEach((function(t){"wasabi"===k[t.card].family&&"nigiri"===a&&(c.push(s.a.createElement(w,{key:"".concat(e,"-").concat(t.card,"-").concat(o),cardData:k[t.card],img:t.card,revealed:t.revealed})),o++)})),c.length>i.length&&(i.length=c.length,i.family=a),l.push(s.a.createElement("div",{key:a,className:"sushi-family ".concat(a)},c))}})),l.forEach((function(a){a.key===i.family&&"tea"!==a.key&&r.forEach((function(t){"tea"===k[t.card].family&&(a.props.children.push(s.a.createElement(w,{key:"".concat(e,"-").concat(t.card,"-").concat(o),cardData:k[t.card],img:t.card,revealed:t.revealed})),o++)}))})),0===i.length){var d=[];r&&r.forEach((function(a){"tea"===k[a.card].family&&(d.push(s.a.createElement(w,{key:"".concat(e,"-").concat(a.card,"-").concat(o),cardData:k[a.card],img:a.card,revealed:a.revealed})),o++)})),l.push(s.a.createElement("div",{key:"tea",className:"sushi-family tea"},d))}o=1;var m=[];r&&r.forEach((function(a){"ice-cream"===k[a.card].family&&(m.push(s.a.createElement(w,{key:"".concat(e,"-").concat(a.card,"-").concat(o),cardData:k[a.card],img:a.card,revealed:a.revealed})),o++)})),c.push(s.a.createElement("div",{key:e,className:"card-column bg-".concat(t[e].color,"-faded")},s.a.createElement("div",{className:"panel-score bg-".concat(t[e].color)},s.a.createElement("h2",null,e,":"),s.a.createElement("strong",{className:"score"},t[e].score?t[e].score:0)),s.a.createElement("div",{className:"panel-cards"},l),s.a.createElement("div",{className:"panel-dessert bg-".concat("pink"===t[e].color?"purple":"pink")},m)))}})),c},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keydown",(function(a){"Escape"===a.key&&(e.props.settingsDisplayed?e.props.handleSettingsDisplay():e.handleHandVisibility())}))}},{key:"render",value:function(){var e=this.props.localUser,a=this.props.users;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card-panels wrapper gutter-1-2".concat(!0===this.props.roundEnd?" opacity-1-4":"")},s.a.createElement("section",{className:"local-user-cards gutter-1-2"},s.a.createElement("div",{className:"panel-wrap bg-".concat(a[e].color,"-faded")},s.a.createElement("div",{className:"panel-score bg-".concat(a[e].color)},s.a.createElement("strong",{className:"score"},this.props.users[e].score?this.props.users[e].score:0),a[e].host?s.a.createElement("span",{className:"host-badge bg-pink"},"H"):null),s.a.createElement("div",{className:"panel-cards"},s.a.createElement("h2",null,"Your Sushi"),this.myPlayedCards()),s.a.createElement("div",{className:"panel-dessert bg-".concat("pink"===a[e].color?"purple":"pink")},s.a.createElement("h3",null,"Dessert"),s.a.createElement("div",{className:"dessert-cards"},this.displayDessert())))),s.a.createElement("section",{className:"user-cards gutter-1-2 push"},this.displayPlayerPlayedCards())),this.showHand(),!0===this.props.roundEnd?s.a.createElement(x,{users:this.props.users,localUser:this.props.localUser,newRound:this.props.newRound,startNewRound:this.props.startNewRound,calculateScore:this.props.calculateScore,round:this.props.round,exitToLobby:this.props.exitToLobby}):null)}}]),t}(s.a.Component),P=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).handleExitToLobby=function(){e.props.exitToLobby()},e.handleRestart=function(){e.props.exitToLobby(),e.props.startGame()},e}return Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"pop-up-settings island-2"},s.a.createElement("h2",{className:"push-2"},"Settings"),s.a.createElement("button",{onClick:this.props.handleSettingsDisplay,className:"btn-x-close"},"X"),s.a.createElement("div",{className:"settings-grid"},s.a.createElement("div",{className:"grid-flex-v-middle grid-flex-h-split push"},s.a.createElement("h3",{className:"headline-5 push-0"},"Quit current game:"),s.a.createElement("button",{className:"btn",onClick:this.handleExitToLobby},"Exit to Lobby")),s.a.createElement("div",{className:"grid-flex-v-middle grid-flex-h-split"},s.a.createElement("div",null,s.a.createElement("h3",{className:"headline-5 push-0"},"Restart game:"),s.a.createElement("p",{className:"push body-2"},"This will start a new game with new random hands.")),s.a.createElement("button",{className:"btn",onClick:this.handleRestart},"Restart Game"))))}}]),t}(s.a.Component),R=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).state={deck:{},users:{},localUser:"",gameStart:{},round:{},roundEnd:!1,hands:{},settingsDisplayed:!1,misoPlayed:!1,roundScoreCalculated:!1},e.addUser=function(a){var t=Object.keys(e.state.users).length,r=Object(p.a)({},e.state.users);0===t?(a.host=!0,r[a.userName]=a,e.setState({users:r,localUser:a.userName})):(r[a.userName]=a,e.setState({users:r,localUser:a.userName}))},e.deleteUser=function(a){var t=Object(p.a)({},e.state.users);if(!0===t[a].host){t[a]=null;var r=Object.keys(t);void 0!==t[r[1]]&&(null===t[r[0]]?t[r[1]].host=!0:t[r[0]].host=!0),e.setState({users:t})}else t[a]=null,e.setState({users:t})},e.startGame=function(){var a=Object.keys(e.state.users).length,t=N();e.newRound(a,t,!0),e.setState({gameStart:!0})},e.startNewRound=function(){var a=Object.keys(e.state.users).length,t=[],r=N();e.state.deck.forEach((function(e){"ice-cream"===e&&t.push(e)}));var s=[].concat(Object(u.a)(r),t);console.log(t),console.log(r),console.log(s),e.newRound(a,s,!1),e.setState({roundEnd:!1,roundScoreCalculated:!1})},e.newRound=function(a,t,r){var s,c=Object(u.a)(t),n=0;if(r?(s=1,e.setState({round:s})):(s=e.state.round+1,e.setState({round:s})),1===s)for(;n<(a<6?5:7);)c.push("ice-cream"),n++;else if(2===s)for(;n<(a<6?3:5);)c.push("ice-cream"),n++;else if(3===s)for(;n<(a<6?2:3);)c.push("ice-cream"),n++;console.log(c),setTimeout((function(){e.dealCards(c)}),1)},e.dealCards=function(a){var t,r=Object(u.a)(a),s=Object(p.a)({},e.state.hands),c=Object.keys(e.state.users),n=c.length,l=Object(p.a)({},e.state.users),o=0,i=0;for(t=n<4?10:n<6?9:n<8?8:7;o<t;){for(var d=0;d<n;d++){var m=Math.floor(Math.random()*r.length),h=r[m];void 0===s[d]?(s[d]=[],s[d].push(h)):s[d].push(h),r.splice(m,1)}o++}for(;i<n;)l[c[i]].handRef=i,l[c[i]].playedCards&&l[c[i]].playedCards.cards.length>1?function(){var e=[];l[c[i]].playedCards.cards.forEach((function(a,t){"ice-cream"===a.card&&e.push({card:"ice-cream",revealed:!0})})),l[c[i]].playedCards={cards:[].concat(e),ready:!1}}():l[c[i]].playedCards={cards:[],ready:!1},i++;e.setState({deck:r,hands:s,users:l})},e.playCard=function(a){var t=e.state.localUser,r=Object(p.a)({},e.state.users),s=Object.keys(r),c=Object(p.a)({},e.state.hands),n=r[t].handRef;r[t].playedCards.cards||(r[t].playedCards.cards=[]),"egg"!==a&&"squid"!==a&&"salmon"!==a||!r[t].playedCards.wasabiWaiting?"miso-soup"===a?!0===e.state.misoPlayed?(s.forEach((function(e){var a=0,t=[];r[e].playedCards.cards&&(t=Object(u.a)(r[e].playedCards.cards),a=r[e].playedCards.cards.length);var s=t.pop();s&&"miso-soup"===s.card&&r[e].playedCards.ready&&(r[e].playedCards.cards[a-1].cancelled=!0)})),r[t].playedCards.cards.push({card:a,scored:!1,revealed:!1,cancelled:!0})):(r[t].playedCards.cards.push({card:a,scored:!1,revealed:!1,cancelled:!1}),e.setState({misoPlayed:!0})):r[t].playedCards.cards.push({card:a,scored:!1,revealed:!1}):(r[t].playedCards.cards.push({card:a,scored:!1,revealed:!1,wasabiApplied:!0}),r[t].playedCards.wasabiWaiting=!1),"wasabi"===a&&(r[t].playedCards.wasabiWaiting=!0),r[t].playedCards.ready=!0,e.setState({users:r});var l=[].concat(Object(u.a)(c[n].slice(0,c[n].indexOf(a))),Object(u.a)(c[n].slice(c[n].indexOf(a)+1)));c[n]=l,setTimeout((function(){e.setState({hands:c})}),500);for(var o=0,i=!1;o<s.length;){if(!r[s[o]].playedCards.ready){o++,i=!1;break}i=!0,o++}i&&(e.revealCards(),e.setState({misoPlayed:!1}))},e.revealCards=function(){var a=Object(p.a)({},e.state.users),t=Object.keys(a),r=Object(p.a)({},e.state.hands);t.forEach((function(s){a[s].playedCards.cards.forEach((function(e){e.revealed=!0})),a[s].handRef===t.length-1?a[s].handRef=0:a[s].handRef++,Object.keys(r).length<t.length?setTimeout((function(){!1===e.state.roundScoreCalculated&&e.calculateScore(),e.setState({roundEnd:!0}),e.setState({roundScoreCalculated:!0})}),1e3):a[s].playedCards.ready=!1})),e.setState({users:a})},e.calculateScore=function(){var a=Object(p.a)({},e.state.users),t=Object.keys(a),r=t.length,s={},c=e.state.round;if(t.forEach((function(e){var t=a[e].playedCards.cards,r=0,n=0,l=0,o=0,i=!1,d=0,m={};if(a[e].score&&(r=a[e].score),t.forEach((function(e){m[k[e.card].family]?"wasabi"===k[e.card].family?m.nigiri=m.nigiri+1:m[k[e.card].family]=m[k[e.card].family]+1:"wasabi"===k[e.card].family?m.nigiri=1:m[k[e.card].family]=1,e.scored||("nigiri"===k[e.card].family?(e.wasabiApplied?r+=3*k[e.card].value:r+=k[e.card].value,e.scored=!0):"miso-soup"!==k[e.card].family||e.cancelled?"tempura"===e.card?(n++,e.scored=!0):"sashimi"===e.card?(l++,e.scored=!0):"maki"===k[e.card].family?(o+=k[e.card].value,e.scored=!0):"tea"===k[e.card].family?i=!0:3===c&&"ice-cream"===k[e.card].family&&(d+=1,e.scored=!0):(r+=3,e.scored=!0))})),n>=2){var u=5*Math.floor(n/2);r+=u}if(l>=3){var p=10*Math.floor(l/3);r+=p}if(o>0&&(s[e]=o),i){var h=Object.entries(m).sort((function(e,a){var t=e[1];return a[1]-t}));r+=h[0][1]}if(d>=4){var f=12*Math.floor(d/4);r+=f}a[e].score=r,a[e].playedCards.cards=t})),0!==Object.keys(s).length){var n,l,o,i,d,m=Object.entries(s).sort((function(e,a){var t=e[1];return a[1]-t}));if(r>6)m.forEach((function(e,t){0===t?(a[e[0]].score=a[e[0]].score+6,n=e[1]):1===t?e[1]===n?a[e[0]].score=a[e[0]].score+6:(a[e[0]].score=a[e[0]].score+4,l=e[1]):2===t?e[1]===n?a[e[0]].score=a[e[0]].score+6:e[1]===l?a[e[0]].score=a[e[0]].score+4:(a[e[0]].score=a[e[0]].score+2,o=e[1]):l?o?e[1]===n?a[e[0]].score=a[e[0]].score+6:e[1]===l?a[e[0]].score=a[e[0]].score+4:e[1]===o&&(a[e[0]].score=a[e[0]].score+2):(a[e[0]].score=a[e[0]].score+2,o=e[1]):(a[e[0]].score=a[e[0]].score+4,l=e[1])}));else m.forEach((function(e,t){0===t?(a[e[0]].score=a[e[0]].score+6,i=e[1]):1===t?e[1]===i?a[e[0]].score=a[e[0]].score+6:(a[e[0]].score=a[e[0]].score+3,d=e[1]):d?e[1]===i?a[e[0]].score=a[e[0]].score+6:e[1]===d&&(a[e[0]].score=a[e[0]].score+3):(a[e[0]].score=a[e[0]].score+3,d=e[1])}))}e.setState({users:a})},e.subtitleDisplay=function(){return"object"===typeof e.state.gameStart||!1===e.state.gameStart?"Lobby":"Round ".concat(e.state.round)},e.handleSettingsDisplay=function(){e.state.settingsDisplayed?e.setState({settingsDisplayed:!1}):e.setState({settingsDisplayed:!0})},e.settingsDisplay=function(){return s.a.createElement(P,{handleSettingsDisplay:e.handleSettingsDisplay,exitToLobby:e.exitToLobby,startGame:e.startGame})},e.exitToLobby=function(){var a=Object(p.a)({},e.state.users);Object.keys(a).forEach((function(e){a[e].playedCards=null,a[e].handRef=null,a[e].score=null})),e.setState({gameStart:!1,round:null,hands:null,deck:null,misoPlayed:!1,users:a,roundScoreCalculated:!1,roundEnd:!1}),e.setState({settingsDisplayed:!1})},e.gameBoardDisplay=function(){var a=e.props.match.params.gamecode,t=Object.keys(e.state.users),r=e.state.localUser;if(!0===e.state.gameStart&&t.includes(r)){var c=Object.keys(e.state.users).length;return s.a.createElement(U,{users:e.state.users,localUser:e.state.localUser,deck:e.state.deck,hands:e.state.hands,userCount:c,playCard:e.playCard,settingsDisplayed:e.state.settingsDisplayed,handleSettingsDisplay:e.handleSettingsDisplay,roundEnd:e.state.roundEnd,newRound:e.newRound,startNewRound:e.startNewRound,calculateScore:e.calculateScore,round:e.state.round,exitToLobby:e.exitToLobby})}return s.a.createElement(O,{gamecode:a,users:e.state.users,addUser:e.addUser,deleteUser:e.deleteUser,localUser:e.state.localUser,startGame:e.startGame})},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem(this.props.match.params.gamecode);if(e){var a=JSON.parse(e);this.setState({deck:a.deck,users:a.users,gameStart:a.gameStart,round:a.round,hands:a.hands}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/deck"),{context:this,state:"deck"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/users"),{context:this,state:"users"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/gameStart"),{context:this,state:"gameStart"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/round"),{context:this,state:"round"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/roundEnd"),{context:this,state:"roundEnd"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/hands"),{context:this,state:"hands"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/misoPlayed"),{context:this,state:"misoPlayed"})}else this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/deck"),{context:this,state:"deck"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/users"),{context:this,state:"users"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/gameStart"),{context:this,state:"gameStart"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/round"),{context:this,state:"round"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/roundEnd"),{context:this,state:"roundEnd"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/hands"),{context:this,state:"hands"}),this.ref=b.syncState("sushi-go/".concat(this.props.match.params.gamecode,"/misoPlayed"),{context:this,state:"misoPlayed"});var t=JSON.parse(localStorage.getItem("localUser"));this.setState({localUser:t})}},{key:"componentDidUpdate",value:function(){localStorage.setItem(this.props.match.params.gamecode,JSON.stringify(this.state)),localStorage.setItem("localUser",JSON.stringify(this.state.localUser))}},{key:"render",value:function(){var e=this.props.match.params.gamecode,a=this.state.localUser,t=Object(p.a)({},this.state.users),r=!!t[a]&&t[a].host;return s.a.createElement(s.a.Fragment,null,s.a.createElement(v,{subtitle:this.subtitleDisplay(),gamecode:e,host:r,handleSettingsDisplay:this.handleSettingsDisplay,gameStart:this.state.gameStart}),s.a.createElement("main",{id:"main",role:"main",className:"flex pad-t-6".concat(this.state.settingsDisplayed?" opacity-1-4":"")},this.gameBoardDisplay()),this.state.settingsDisplayed&&this.settingsDisplay(),s.a.createElement(E,null))}}]),t}(s.a.Component);function M(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function G(){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a=e[Math.floor(Math.random()*e.length)],t=e[Math.floor(Math.random()*e.length)],r=e[Math.floor(Math.random()*e.length)];return a+Math.floor(10*Math.random())+t+Math.floor(10*Math.random())+r}var T=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=a.call.apply(a,[this].concat(c))).gcInput=s.a.createRef(),e.joinGame=function(a){a.preventDefault();var t=e.gcInput.current.value;e.props.history.push("/".concat(M(t)))},e}return Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(v,null),s.a.createElement("main",{id:"main",role:"main",className:"flex-children-center pad-t-b-8"},s.a.createElement("form",{className:"pop-up-join-game island-2",onSubmit:this.joinGame},s.a.createElement("h2",null,"Join or host a game!"),s.a.createElement("p",null,"To start a new game, simply enter your name and a new unique ",s.a.createElement("strong",null,"Gamecode")," in the form below and hit ",s.a.createElement("em",null,"Start Playing"),"! If you wish to join a game someone else created, enter your name and their ",s.a.createElement("strong",null,"Gamecode")," and hit ",s.a.createElement("em",null,"Start Playing"),"!"),s.a.createElement("div",{className:"grid-flex"},s.a.createElement("input",{className:"xs-1-2",type:"text",ref:this.gcInput,required:!0,placeholder:"Enter Gamecode",defaultValue:G()}),s.a.createElement("button",{className:"btn btn-medium btn-no-shadow xs-1-2",type:"submit"},"Start Playing!")))),s.a.createElement(E,null))}}]),t}(s.a.Component),A=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(d.a,null,s.a.createElement(m.c,null,s.a.createElement(m.a,{exact:!0,path:"/",component:T}),s.a.createElement(m.a,{path:"/:gamecode",component:R})))}}]),t}(s.a.Component);Object(c.render)(s.a.createElement(A,null),document.querySelector("#react-loader"))}},[[33,1,2]]]);
//# sourceMappingURL=main.5e715c3d.chunk.js.map